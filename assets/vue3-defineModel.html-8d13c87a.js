import{_ as p,r as o,o as l,c,d as s,e as n,b as t,f as i,a as e}from"./app-1631cab8.js";const u={},r=s("h1",{id:"å¿«å»è¯•ç”¨ä¸‹-vue3-æ–°ç‰¹æ€§-definemodel-è´¼å¥½ç”¨",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#å¿«å»è¯•ç”¨ä¸‹-vue3-æ–°ç‰¹æ€§-definemodel-è´¼å¥½ç”¨","aria-hidden":"true"},"#"),n(" å¿«å»è¯•ç”¨ä¸‹ Vue3 æ–°ç‰¹æ€§ defineModelï¼Œè´¼å¥½ç”¨")],-1),d={href:"https://github.com/vuejs/rfcs/discussions/503",target:"_blank",rel:"noopener noreferrer"},k=s("code",null,"v-model",-1),v=s("code",null,"defineModel",-1),m=s("code",null,"v-model",-1),g=e(`<h2 id="ä¸¾ä¸ªä¾‹å­-ğŸŒ°" tabindex="-1"><a class="header-anchor" href="#ä¸¾ä¸ªä¾‹å­-ğŸŒ°" aria-hidden="true">#</a> ä¸¾ä¸ªä¾‹å­ ğŸŒ°</h2><p>ä»¥å‰çš„å†™æ³•æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ª<code>v-model</code>éœ€è¦å†™å¾ˆå¤šä¸œè¥¿ï¼ŒåŒ…æ‹¬<code>props</code>å’Œ<code>emit</code>è§¦å‘æ›´æ–°ã€‚</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modelValue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onInput<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">modelValue</span><span class="token operator">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> defineEmits<span class="token operator">&lt;</span><span class="token punctuation">{</span>
  <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token string">&#39;update:modelValue&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">onInput</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span><span class="token operator">:</span> Event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target <span class="token keyword">as</span> HTMLInputElement
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;update:modelValue&#39;</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è€Œ<code>defineModel</code>çš„æ–°å†™æ³•ï¼Œåªéœ€è¦å†™ 2 è¡Œä»£ç å°±è¡Œäº†ï¼Œæ˜¯ä¸æ˜¯ç¬é—´è§‰å¾—ä»£ç çœ‹è¿™æ¸…çˆ½å¤šäº†ã€‚</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modelValue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onInput<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> modelValue <span class="token operator">=</span> defineModel<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">onInput</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span><span class="token operator">:</span> Event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target <span class="token keyword">as</span> HTMLInputElement
  modelValue<span class="token punctuation">.</span>value <span class="token operator">=</span> target<span class="token punctuation">.</span>value
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><div class="highlight-line">Â </div><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è¯¦ç»†è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è¯­æ³•" aria-hidden="true">#</a> è¯¦ç»†è¯­æ³•</h2><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// å¦‚æœä½ ä¸å–œæ¬¢TSï¼Œå¯ä»¥ä¸ç”¨å®šä¹‰ç±»å‹</span>
<span class="token keyword">const</span> modelValue <span class="token operator">=</span> <span class="token function">defineModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// ^? Ref&lt;any&gt;</span>
modelValue<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">10</span>

<span class="token comment">// æ”¯æŒæ³›å‹çš„å½¢å¼å®šä¹‰å‚æ•°ç±»å‹ï¼Œå¦‚string</span>
<span class="token keyword">const</span> modelValue <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineModel</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// ^? Ref&lt;string | undefined&gt;</span>
modelValue<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>

<span class="token comment">// æ”¯æŒpropçš„requiredå†™æ³•</span>
<span class="token keyword">const</span> modelValue <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineModel</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> required<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ^? Ref&lt;string&gt;</span>

<span class="token comment">// æ”¯æŒæŒ‡å®šv-modelçš„åç§°ï¼Œå¦‚v-model:count</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineModel</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;count&#39;</span><span class="token punctuation">)</span>
count<span class="token punctuation">.</span>value<span class="token operator">++</span>

<span class="token comment">// æ”¯æŒé»˜è®¤å€¼å†™æ³•</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token generic-function"><span class="token function">defineModel</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;count&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ^? Ref&lt;number&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æœ¬åœ°-local-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#æœ¬åœ°-local-æ¨¡å¼" aria-hidden="true">#</a> æœ¬åœ° Local æ¨¡å¼</h2><p><code>defineModel</code>é€‰é¡¹å¯¹è±¡è¿˜é¢å¤–æä¾›äº†ä¸€ä¸ª<code>local</code>å‚æ•°ï¼Œå½“è®¾ç½®ä¸º true çš„æ—¶å€™ï¼Œå³æ—¶æ²¡æœ‰å†™<code>v-model</code>ä¹Ÿèƒ½å¤Ÿæœ¬åœ° å‘ç”Ÿå˜åŒ–ã€‚</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- localæ¨¡å¼ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Comp</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),b={href:"https://play.vuejs.org/#eNqFkL1uwzAMhF+F0JIUTuPMhm206Ny1kxZHoVuj+oNMZRH87pUsO0aTIRvJO/D4MbB3a49Xj6xi9SjcYAlGJG9brgdljSP4MMpC74yC3bFMTbLvbnJw2E+LngUAroXRI4EwXhM0EC370wvXdZkj4vLYECorO8LYAdRzTJnrH7dW8/T6qswFZcPZvJCzR9+gradHY1ZDWC6ZpnTDLZcd2Mpzjw+y098NjdsbQqKA/6Qr55z61UmPEfaC/aDxM41q7dUZXbsPII3oZAXkPB6SpfOSKjjB9OQtZ09kNLwJOYjfCLZFFQVnbVGX2bGAbvI96/QH6WaqLQ==",target:"_blank",rel:"noopener noreferrer"},h=e(`<h2 id="å¯ç”¨-definemodel" tabindex="-1"><a class="header-anchor" href="#å¯ç”¨-definemodel" aria-hidden="true">#</a> å¯ç”¨ defineModel</h2><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      script<span class="token operator">:</span> <span class="token punctuation">{</span>
        defineModel<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="vue-cli" tabindex="-1"><a class="header-anchor" href="#vue-cli" aria-hidden="true">#</a> vue-cli</h3><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>éœ€è¦ <code>vue-loader@^17.1.1</code></p></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>module
      <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">&#39;vue&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;vue-loader&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>options<span class="token punctuation">,</span>
          <span class="token literal-property property">defineModel</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5);function f(y,_){const a=o("ExternalLinkIcon");return l(),c("div",null,[r,s("p",null,[n("å…·ä½“è®¨è®ºå¯ä»¥å‚è§è¯¥"),s("a",d,[n("RFC"),t(a)]),n("ï¼Œçœ‹åå­—å¯èƒ½æœ‰çš„äººå°±çŸ¥é“å¯èƒ½æ˜¯å’Œ"),k,n("æœ‰å…³äº†ï¼Œä½ çŒœçš„æ²¡é”™ï¼Œæ–°å‡ºçš„"),v,n("å¯ä»¥æ›´åŠ å¿«æ·çš„è‡ªå®šä¹‰ç»„ä»¶ä¸Šçš„"),m,n("ã€‚")]),i(" more "),g,s("p",null,[n("å®˜ç½‘è¿˜è´´å¿ƒçš„å‡†å¤‡äº†ä¸€ä¸ªå°"),s("a",b,[n("Demo"),t(a)]),n("ï¼Œæœ‰å…´è¶£çš„ä¹Ÿå¯ä»¥ç›´æ¥æ‰“å¼€çœ‹çœ‹ã€‚")]),h])}const w=p(u,[["render",f],["__file","vue3-defineModel.html.vue"]]);export{w as default};
